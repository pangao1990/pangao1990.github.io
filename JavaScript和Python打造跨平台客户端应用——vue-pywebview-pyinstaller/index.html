<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://pangao1990.gitee.io/images/favicon.jpg"><link rel="icon" href="https://pangao1990.gitee.io/images/favicon.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="潘高"><meta name="keywords" content="Python,Vue,JS,CSS,H5,HTML,Android,iOS,Java,Swift,Perl,微信小程序,开发,博客,潘高"><meta name="description" content="前言PPX（曾用名 vue-pywebview-pyinstaller）。第一个 P 表示 Python ，当然，也可以表示 Pangao（潘高，也就是我本人）。第二个 P 表示 Pywebview ，也可以表示 Pyinstaller 。第三个 X 表示未知，指前端可以使用 Vue、React、Angular、HTML 中的任意一种。 搭后语现如今，要说比较火的编程语言当属 JavaScript"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller"><meta property="og:url" content="https://blog.pangao.vip/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller/"><meta property="og:site_name" content="潘高的小站"><meta property="og:description" content="前言PPX（曾用名 vue-pywebview-pyinstaller）。第一个 P 表示 Python ，当然，也可以表示 Pangao（潘高，也就是我本人）。第二个 P 表示 Pywebview ，也可以表示 Pyinstaller 。第三个 X 表示未知，指前端可以使用 Vue、React、Angular、HTML 中的任意一种。 搭后语现如今，要说比较火的编程语言当属 JavaScript"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pangao1990.gitee.io/pic/index/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller.png"><meta property="article:published_time" content="2022-03-24T10:03:22.000Z"><meta property="article:modified_time" content="2023-04-26T09:22:53.532Z"><meta property="article:author" content="潘高"><meta property="article:tag" content="Python"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="Vue"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://pangao1990.gitee.io/pic/index/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller.png"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5317369003185250" crossorigin="anonymous"></script><meta name="google-site-verification" content="google180fd90b1a12c24d.html"><title>JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller - 潘高的小站</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"blog.pangao.vip",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!1},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"3cb997f9d46af905b450452a8f181d9e",google:"UA-163962674-1",gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:1278827075,leancloud:{app_id:"w5RAfQXjT6iFfBtGwiTfxQOP-gzGzoHsz",app_key:"h55viQ2cLIrigHjPHDfIS2ly",server_url:"https://w5rafqxj.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!0}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>var _hmt;Fluid.ctx.dnt||(_hmt=_hmt||[],function(){var t=document.createElement("script"),e=(t.src="https://hm.baidu.com/hm.js?3cb997f9d46af905b450452a8f181d9e",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}())</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.google-analytics.com/analytics.js",function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-163962674-1","auto"),ga("send","pageview")})</script><script async src="https://www.google-analytics.com/analytics.js"></script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("//s4.cnzz.com/z_stat.php?id=1278827075&show=pic")</script><meta name="generator" content="Hexo 6.3.0"></head><script async src="https://www.googletagmanager.com/gtag/js?id=AW-715652541"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","AW-715652541")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-P4XN0EX1GY"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P4XN0EX1GY")</script><body><header><div class="header-inner" style="height:40vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>潘高的小站</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-shijianzhou"></i> <span>时间轴</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/icp/"><i class="iconfont icon-icp"></i> <span>icp备案</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://pangao1990.gitee.io/pic/banner/JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.2)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 潘高 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-03-24 18:03" pubdate>星期四, 三月 24日 2022, 6:03 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 5.7k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 29 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-1"></div><div class="col-lg-9 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller</h1><p class="note note-info">本文最后更新于：2023年4月26日 下午</p><div class="markdown-body"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><strong>PPX</strong>（曾用名 vue-pywebview-pyinstaller）。第一个 <strong>P</strong> 表示 <strong>P</strong>ython ，当然，也可以表示 <strong>P</strong>angao（潘高，也就是我本人）。第二个 <strong>P</strong> 表示 <strong>P</strong>ywebview ，也可以表示 <strong>P</strong>yinstaller 。第三个 <strong>X</strong> 表示未知，指前端可以使用 Vue、React、Angular、HTML 中的任意一种。</p><h3 id="搭后语"><a href="#搭后语" class="headerlink" title="搭后语"></a>搭后语</h3><p>现如今，要说比较火的编程语言当属 JavaScript 和 Python 了，这两门语言都可以独立编写前端页面、后端服务器、手机 APP、电脑客户端等等，无所不能。不过，不同的编程语言有不同的侧重点。比如 JavaScript 写网页得心应手，Python 处理大数据信手拈来。那么，能不能取两者的优点，构建一个跨平台客户端框架呢？这就有了今天的主角：<a target="_blank" rel="noopener" href="https://github.com/pangao1990/PPX">PPX</a>。</p><h3 id="应用简介"><a href="#应用简介" class="headerlink" title="应用简介"></a>应用简介</h3><p><a target="_blank" rel="noopener" href="https://github.com/pangao1990/PPX">PPX</a> 基于 pywebview 和 PyInstaller 框架，构建 macOS 和 windows 平台的客户端。本应用的视图层支持 Vue、React、Angular、HTML 中的任意一种，业务层采用本地 Python。考虑到某些生物计算场景数据量大，数据私密，因此将数据上传到服务器计算，并不一定是最优解，选择采用本地 Python 也是一种不错的选择。不过，如果需要调用远程 API，本应用也是支持的。</p><h5 id="应用优势"><a href="#应用优势" class="headerlink" title="应用优势"></a>应用优势</h5><ul><li>视图层可使用任意一款你喜欢的前端框架，比如 Vue、React、Angular、HTML 等，迁移无压力</li><li>采用 Python 编程语言开发业务层，模块丰富</li><li>本应用已经封装打包环节，一键生成 macOS 和 windows 平台的客户端应用。开发者只需要关注视图效果和业务逻辑本身，将繁重复杂的打包环节交给本应用处理即可</li></ul><h5 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h5><ul><li>对软件的用户界面有一定美感要求</li><li>需要用到 Python 中的人工智能、生信分析等模块</li><li>考虑搭建本地应用，使用本机计算和存储资源</li></ul><h5 id="适用人群"><a href="#适用人群" class="headerlink" title="适用人群"></a>适用人群</h5><p>熟悉 Python3 和 任意一款前端框架，如 Vue、React、Angular、HTML 编程的程序员。</p><h3 id="应用安装"><a href="#应用安装" class="headerlink" title="应用安装"></a>应用安装</h3><h4 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h4><ul><li><p>npm16.14+ (<a href="https://blog.pangao.vip/NodeJs%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">NodeJs 安装教程</a>)</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment"># 推荐使用 pnpm，全局安装，命令如下：</span><br><span class="hljs-built_in">npm</span> i -g pnpm<br></code></pre></td></tr></table></figure></li><li><p>Python3.7-3.9 (<a href="https://blog.pangao.vip/Python%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85">Python 安装教程</a>)</p></li></ul><h4 id="应用下载"><a href="#应用下载" class="headerlink" title="应用下载"></a>应用下载</h4><p>利用 git（<a href="https://blog.pangao.vip/Git%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">git 安装教程</a>） 下载应用，如下所示：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/pangao1990/</span>PPX.git<br></code></pre></td></tr></table></figure><p>或者，直接在我的 <a target="_blank" rel="noopener" href="https://github.com/pangao1990/PPX">github</a> 下载。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 进入项目</span><br><span class="hljs-built_in">cd</span> PPX<br></code></pre></td></tr></table></figure><p>进入项目，项目清单如下所示：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-1.png" srcset="/img/loading.gif" lazyload alt="image"></p><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>下载完毕后，运行初始化命令，程序会自动下载安装对应操作平台的所需依赖软件，如下所示：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 初始化</span><br>pnpm <span class="hljs-built_in">run</span> init<br></code></pre></td></tr></table></figure><p>没报错信息，则初始化完成，如下所示：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-2.png" srcset="/img/loading.gif" lazyload alt="image"></p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-3.png" srcset="/img/loading.gif" lazyload alt="image"></p><p>项目根目录多了一个 node_modules 文件夹和 pnpm-lock.yaml 文件，用于存放 npm 下载的包。</p><h3 id="应用运行"><a href="#应用运行" class="headerlink" title="应用运行"></a>应用运行</h3><p>输入如下命令，即可启动应用：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">pnpm <span class="hljs-built_in">run</span> start<br></code></pre></td></tr></table></figure><p>终端显示如下：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-4.png" srcset="/img/loading.gif" lazyload alt="image"></p><p>同时，启动一个客户端程序，如下：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-5.png" srcset="/img/loading.gif" lazyload alt="image"></p><p>整体效果如下所示（gif 图片加载可能有点慢）：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-6.gif" srcset="/img/loading.gif" lazyload alt="image"></p><h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h3><h4 id="客户端引擎介绍"><a href="#客户端引擎介绍" class="headerlink" title="客户端引擎介绍"></a>客户端引擎介绍</h4><p>本应用基于 <a target="_blank" rel="noopener" href="https://pywebview.flowrl.com/">pywebview</a> 构建客户端。而 pywebview 构架构建客户端的原理是利用本地电脑自带的浏览器引擎驱动，模拟生成客户端。本质上还是网页，或者说是一个浏览器，但是感官上和本地客户端没有差别。</p><p>那么，基于 pywebview 构架构建客户端的成败或质量，就与本地电脑的浏览器引擎息息相关了。</p><h5 id="windows-系统"><a href="#windows-系统" class="headerlink" title="windows 系统"></a>windows 系统</h5><p>在 windows 系统上，大体上分为两类客户端引擎：正常模式和兼容模式。</p><ul><li>正常模式</li></ul><p>正常模式下，按照 edgechromium ，edgehtml， mshtml 的客户端引擎依次检索。如果本地电脑 edge 浏览器支持这些引擎，则客户端可以正常启动。否则，请安装对应的 <a target="_blank" rel="noopener" href="https://developer.microsoft.com/en-us/microsoft-edge/webview2/">EdgeWebView2Runtime</a> 浏览器引擎。</p><ul><li>兼容模式</li></ul><p>如果本地电脑 edge 浏览器不支持这些引擎，同时也不想下载 <a target="_blank" rel="noopener" href="https://developer.microsoft.com/en-us/microsoft-edge/webview2/">EdgeWebView2Runtime</a> ，那么就可以使用兼容模式。兼容模式的原理就是利用 <a target="_blank" rel="noopener" href="https://github.com/cztomczak/cefpython">CEFPython</a>，嵌入 Chromium 的 Web 浏览器控件。也就是只要本地电脑安装了谷歌浏览器 V66 版及其以上版本，即可正常启动客户端。缺点就是生成的安装包体积会增加大约 60M 左右。</p><h5 id="macOS-系统"><a href="#macOS-系统" class="headerlink" title="macOS 系统"></a>macOS 系统</h5><p>macOS 系统的浏览器引擎就没有那么多版本了，由于 macOS 系统的封闭性，在 macOS 系统就只有一种 WebKit 引擎可用。</p><p>不过，在 macOS 系统却存在另一个问题。那就是苹果自主研发的 M1 芯片。由于 windows 系统随处可见，我可以找很多电脑测试。mac 电脑我就只有一台 M1 芯片和一个 x86_64 芯片，做不了更多测试。总之，目前我这两台苹果电脑构建的客户端不能交叉使用，原因不明。</p><h4 id="构建客户端-API"><a href="#构建客户端-API" class="headerlink" title="构建客户端 API"></a>构建客户端 API</h4><p>构建客户端的主程序是 main.py ，如下所示：</p><p><img src="https://pangao1990.gitee.io/pic/JavaScript%E5%92%8CPython%E6%89%93%E9%80%A0%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94vue-pywebview-pyinstaller-7.png" srcset="/img/loading.gif" lazyload alt="image"></p><p>main.py 里面主要是依靠 webview.create_window 和 webview.start 这两个 API 来构建客户端。其他的一些 API，我也会在后面的教程中详细介绍。或者可以直接查看 <a target="_blank" rel="noopener" href="https://pywebview.flowrl.com/guide/api.html">pywebview 官网</a> 了解详情。</p><h5 id="webview-create-window"><a href="#webview-create-window" class="headerlink" title="webview.create_window"></a>webview.create_window</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">webview.create_window(title, <span class="hljs-attribute">url</span>=<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attribute">html</span>=<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attribute">js_api</span>=None, <span class="hljs-attribute">width</span>=800, <span class="hljs-attribute">height</span>=600, \<br>                      <span class="hljs-attribute">x</span>=None, <span class="hljs-attribute">y</span>=None, <span class="hljs-attribute">resizable</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">fullscreen</span>=<span class="hljs-literal">False</span>, \<br>                      min_size=(200, 100), <span class="hljs-attribute">hidden</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">frameless</span>=<span class="hljs-literal">False</span>, \<br>                      <span class="hljs-attribute">minimized</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">on_top</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">confirm_close</span>=<span class="hljs-literal">False</span>, \<br>                      <span class="hljs-attribute">background_color</span>=<span class="hljs-string">&#x27;#FFF&#x27;</span>)<br></code></pre></td></tr></table></figure><p>创建一个新的 pywebview 窗口，并返回其实例。在开始 GUI 循环之前，窗口不会显示。</p><ul><li><strong>title</strong> 窗口标题</li><li><strong>url</strong> 要加载的 URL。如果 URL 没有协议前缀，则将其解析为相对于应用程序入口点的路径。或者，可以传递 WSGI 服务器对象来启动本地 Web 服务器。</li><li><strong>html</strong> 要加载的 HTML 代码。如果同时指定了 URL 和 HTML，HTML 优先。</li><li><strong>js_api</strong> 将 python 对象暴露到当前 pywebview 窗口的 DOM 中。js_api 对象的方法可以通过调用 window.pywebview.api.<methodname>(<parameters>)从 Javascript 执行。请注意，调用 Javascript 函数会收到一个包含 python 函数的返回值。只有基本的 Python 对象（如 int、str、dict……）才能返回 Javascript。</parameters></methodname></li><li><strong>width</strong> 窗户宽度。默认值为 800px。</li><li><strong>height</strong> 窗户高度。默认值为 600px。</li><li><strong>x</strong> 窗口 x 坐标。默认值居中。</li><li><strong>y</strong> 窗口 y 坐标。默认值居中。</li><li><strong>resizable</strong> 是否可以调整窗口大小。默认值为 True</li><li><strong>fullscreen</strong> 从全屏模式开始。默认为 False</li><li><strong>min_size</strong> 指定最小窗口大小的（宽度、高度）元组。默认值为 200x100</li><li><strong>hidden</strong> 默认情况下创建一个隐藏的窗口。默认为 False</li><li><strong>frameless</strong> 创建一个无框窗口。默认值为 False。</li><li><strong>minimized</strong> 以最小化模式启动</li><li><strong>on_top</strong> 将窗口设置为始终位于其他窗口的顶部。默认值为 False。</li><li><strong>confirm_close</strong> 是否显示窗口关闭确认对话框。默认为 False</li><li><strong>background_color</strong> 加载 WebView 之前显示的窗口的背景颜色。指定为十六进制颜色。默认值为白色。</li><li><strong>transparent</strong> 创建一个透明的窗口。Windows 不支持。默认值为 False。请注意，此设置不会隐藏或使窗口铬透明。将窗口 chrome setframeless 隐藏为 True。</li></ul><h5 id="webview-start"><a href="#webview-start" class="headerlink" title="webview.start"></a>webview.start</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">webview.start(<span class="hljs-attribute">func</span>=None, <span class="hljs-attribute">args</span>=None, localization=&#123;&#125;, <span class="hljs-attribute">gui</span>=None, <span class="hljs-attribute">debug</span>=<span class="hljs-literal">False</span>, <span class="hljs-attribute">http_server</span>=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><p>启动 GUI 循环并显示之前创建的窗口。此函数必须从主线程调用。</p><ul><li><strong>func</strong> 启动 GUI 循环时调用的函数。</li><li><strong>args</strong> 函数参数。可以是单个值，也可以是元组值。</li><li><strong>localization</strong> 带有本地化字符串的词典。默认字符串及其键在 localization.py 中定义</li><li><strong>gui</strong> 强制使用特定的 GUI。允许的值是 cef、qt 或 gtk，具体取决于平台。</li><li><strong>debug</strong> 启用调试模式。</li><li><strong>http_server</strong> 启用内置 HTTP 服务器。如果启用，本地文件将使用随机端口上的本地 HTTP 服务器提供服务。对于每个窗口，都会生成一个单独的 HTTP 服务器。对于非本地 URL，此选项将被忽略。</li></ul><h4 id="域间通信"><a href="#域间通信" class="headerlink" title="域间通信"></a>域间通信</h4><h5 id="从-Python-调用-Javascript"><a href="#从-Python-调用-Javascript" class="headerlink" title="从 Python 调用 Javascript"></a>从 Python 调用 Javascript</h5><p>window.evaluate_js(code, callback&#x3D;None)允许您使用同步返回的最后一个值执行任意 Javascript 代码。如果提供了回调函数，则解析 promise，并调用回调函数，结果作为参数。Javascript 类型转换为 Python 类型，例如 JS 对象到 Python 字典，数组到列表，未定义为 None。由于实现限制，字符串“null”将被计算为 None。另外，evaluate_js 返回的值限制为 900 个字符内。</p><h5 id="从-Javascript-调用-Python"><a href="#从-Javascript-调用-Python" class="headerlink" title="从 Javascript 调用 Python"></a>从 Javascript 调用 Python</h5><p>从 Javascript 调用 Python 函数可以通过两种不同的方法完成。</p><ul><li>通过将 Python 类的实例暴露给 create_window 的 js_api。该类的所有可调用方法都将以 pywebview.api.method_name 的形式公开到 JS 域中。方法名称不得以下划线开头。</li><li>通过将函数传递给窗口对象的 expose(func)这将以 pywebview.api.func_name 的形式将一个或多个函数公开到 JS 域。与 JS API 不同，expose 也允许在运行时公开函数。如果 JS API 和以这种方式公开的函数之间存在名称冲突，则后者优先。</li></ul><h4 id="打包客户端"><a href="#打包客户端" class="headerlink" title="打包客户端"></a>打包客户端</h4><p>pywebview 建议 macOS 用 <a target="_blank" rel="noopener" href="https://py2app.readthedocs.io/en/latest/">py2app</a> 打包，windows 用 <a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/">pyinstaller</a> 打包。但是我发现 pyinstaller 也可以很顺畅得打包 macOS 应用，虽然移植有点问题。</p><p>我就不介绍 pyinstaller 的打包方法了，后面我会出这个框架详细的打包介绍。这里我将打包方法封装在应用中，只需要按命令打包即可。</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs clean">###########<br># 简单用法 #<br>###########<br><br># 初始化<br>pnpm run init<br><br># 开发模式<br>pnpm run start<br><br># 正式打包<br>pnpm run build<br><br># 预打包，带console，方便输出日志信息<br>pnpm run pre<br><br><br>###########<br># 进阶用法 #<br>###########<br><br># 初始化，cef兼容模式<br>pnpm run init:cef<br><br># 开发模式，cef兼容模式【仅win系统】<br>pnpm run start:cef<br><br># 预打包，带console，cef兼容模式【仅win系统】<br>pnpm run pre:cef<br><br># 预打包，带console，生成文件夹【仅win系统】<br>pnpm run pre:folder<br><br># 预打包，带console，生成文件夹，cef兼容模式【仅win系统】<br>pnpm run pre:folder:cef<br><br># 正式打包，cef兼容模式【仅win系统】<br>pnpm run build:cef<br><br># 正式打包，生成文件夹【仅win系统】<br>pnpm run build:folder<br><br># 正式打包，生成文件夹，cef兼容模式【仅win系统】<br>pnpm run build:folder:cef<br></code></pre></td></tr></table></figure><h4 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h4><p>在 api&#x2F;db&#x2F;models.py 中修改数据库格式后，执行以下命令迁移数据库。</p><p>注意：迁移数据库前，需要对 sqlalchemy 数据库对象映射框架有所了解。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 迁移数据库</span><br><span class="hljs-attribute">m</span>=备注迁移信息 pnpm <span class="hljs-built_in">run</span> alembic<br></code></pre></td></tr></table></figure><h3 id="HMR-原理"><a href="#HMR-原理" class="headerlink" title="HMR 原理"></a>HMR 原理</h3><ul><li>使用 npm-run-all 并行启用 vite(自带热更新) 和 pywebview</li><li>使用 nodemon 监听 <code>api/*</code> <code>pyapp/*</code> <code>main.py</code> 等文件，有修改自动重启应用，达到 HRM 效果</li></ul><p>*注：这里感谢 <a target="_blank" rel="noopener" href="https://github.com/WnagoiYy">WnagoiYy</a> 同学的 PR。</p><h3 id="注意问题"><a href="#注意问题" class="headerlink" title="注意问题"></a>注意问题</h3><ul><li>在 windows 系统下，只能打包 exe 等适用于 windows 的程序，不能打包 mac 系统下的 app 程序。同理，mac 也是一样。(<strong>不过，基于 Github Action 可实现同时打包两种安装包</strong>)</li><li>在 windows 系统下，请不要使用中文路径，否则可能会出现 cannot call null pointer pointer from cdata ‘int(_)(void _, int)’ 等错误信息。mac 系统无此问题。</li></ul><h4 id="历史版本"><a href="#历史版本" class="headerlink" title="历史版本"></a>历史版本</h4><h5 id="V4-0-0"><a href="#V4-0-0" class="headerlink" title="V4.0.0"></a>V4.0.0</h5><ul><li>新增 MacOS 环境打包成 .dmg 安装包，Windows 环境打包成 .exe 安装包（基于 Github Action 可实现同时打包两种安装包）</li><li>新增自动检测软件升级</li><li>改 npm 为 pnpm ，节省磁盘空间并提升安装速度</li><li>项目正式改名为 PPX</li></ul><h5 id="V3-1-1"><a href="#V3-1-1" class="headerlink" title="V3.1.1"></a>V3.1.1</h5><ul><li>解决数据库操作时，session 冲突的问题</li><li>修复了一些已知问题</li></ul><h5 id="V3-1-0"><a href="#V3-1-0" class="headerlink" title="V3.1.0"></a>V3.1.0</h5><ul><li>优化数据迁移</li></ul><h5 id="V3-0-0"><a href="#V3-0-0" class="headerlink" title="V3.0.0"></a>V3.0.0</h5><ul><li>新增 SQLite 数据库支持，使用 sqlalchemy 进行 ORM 操作，使用 alembic 进行数据迁移与映射</li><li>新增 static 静态文件夹，可以存放 cache 缓存、db 数据库等，这些文件都将被直接打包到程序包中</li><li>新增 python 调用 js 函数的示例</li><li>在 config.py 中新增配置信息，如代码所在绝对目录等</li><li>修复 python 代码无法打印日志的问题</li><li>构建程序包时，实时更新打包配置文件 spec</li><li>调整项目文件夹结构</li><li>pywebview 模块升级到 4.0</li></ul><h5 id="V2-0-0"><a href="#V2-0-0" class="headerlink" title="V2.0.0"></a>V2.0.0</h5><ul><li>将 Vue3 框架整体分离至 gui 文件夹，如此一来，你可以随意替换 gui 文件夹下的前端框架，使用 Vue、React、Angular、HTML ，或者你喜欢的其他框架均可</li><li>整理框架结构，优化代码逻辑</li></ul><h5 id="V1-3-0"><a href="#V1-3-0" class="headerlink" title="V1.3.0"></a>V1.3.0</h5><ul><li>新增热更新</li></ul><h5 id="V1-0-0"><a href="#V1-0-0" class="headerlink" title="V1.0.0"></a>V1.0.0</h5><ul><li>初始版本</li></ul><hr><p>更多编程教学请关注公众号：<strong>潘高陪你学编程</strong></p><p><img src="https://pangao1990.gitee.io/pic/%E6%BD%98%E9%AB%98%E9%99%AA%E4%BD%A0%E5%AD%A6%E7%BC%96%E7%A8%8B.jpg" srcset="/img/loading.gif" lazyload alt="image"></p><hr></div><div><hr><div style="margin-top:20px;text-align:center"><div style="margin-bottom:10px">如果这篇文章对你有帮助，或者想给我微小的工作一点点资瓷，请随意打赏。</div><div id="QR" style="display:block"><div id="wechat" style="display:inline-block;margin-right:50px"><img id="wechat_qr" src="https://pangao1990.gitee.io/images/wechatpay.jpg" srcset="/img/loading.gif" lazyload alt="潘高 微信支付" style="width:150px;height:150px"><p style="color:#159718">微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="https://pangao1990.gitee.io/images/alipay.png" srcset="/img/loading.gif" lazyload alt="潘高 支付宝" style="width:150px;height:150px"><p style="color:#217cfb">支付宝</p></div></div></div><hr><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Python/" class="category-chain-item">Python</a> <span>></span> <a href="/categories/Python/JavaScript/" class="category-chain-item">JavaScript</a> <span>></span> <a href="/categories/Python/JavaScript/Vue/" class="category-chain-item">Vue</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Python/">#Python</a> <a href="/tags/JavaScript/">#JavaScript</a> <a href="/tags/Vue/">#Vue</a></div></div><div class="license-box my-3"><div class="license-title"><div>JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller</div><div>https://blog.pangao.vip/JavaScript和Python打造跨平台客户端应用——vue-pywebview-pyinstaller/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>潘高</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年3月24日 晚上</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2023年4月26日 下午</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/%E8%AE%B0%E4%B8%80%E4%B8%AA%E5%9C%A8linux%E4%B8%8B%E7%BC%96%E7%A8%8B%E5%AE%B9%E6%98%93%E8%A2%AB%E5%BF%BD%E8%A7%86%E7%9A%84%E5%B0%8Fbug/" title="记一个在linux下编程容易被忽视的小bug"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">记一个在linux下编程容易被忽视的小bug</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022%E5%B9%B42%E6%9C%88%E6%9C%80%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E6%8E%92%E8%A1%8C%E6%A6%9C%EF%BD%9CPython%E9%81%A5%E9%81%A5%E9%A2%86%E5%85%88/" title="2022年2月最受欢迎编程语言排行榜｜Python遥遥领先"><span class="hidden-mobile">2022年2月最受欢迎编程语言排行榜｜Python遥遥领先</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5317369003185250" data-ad-slot="9014150860" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><hr><br><div id="waline"></div><script type="text/javascript">Fluid.utils.loadComments("#waline",function(){Fluid.utils.createCssLink("https://cdn.staticfile.org/waline/2.14.1/waline.min.css"),Fluid.utils.createScript("https://cdn.staticfile.org/waline/2.14.1/waline.min.js",function(){var i=Object.assign({serverURL:"https://waline-1-p3250934.deta.app",path:"window.location.pathname",meta:["nick","mail","link"],requiredMeta:["nick"],lang:"zh-CN",emoji:["https://unpkg.com/@waline/emojis@1.1.0/qq","https://unpkg.com/@waline/emojis@1.1.0/weibo"],dark:'html[data-user-color-scheme="dark"]',wordLimit:0,pageSize:10,avatar:"identicon",avatarCDN:"https://seccdn.libravatar.org/avatar/",avatarForce:!1,highlight:!0},{el:"#waline",path:window.location.pathname});Waline.init(i),Fluid.utils.waitElementVisible("#waline .vcontent",()=>{var i="#waline .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})})})</script><noscript>评论功能在允许 JavaScript 运行的环境下效果更佳哦</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div class="col-lg-7 mx-auto nopadding-x-md"><div class="container custom mx-auto"><link rel="stylesheet" href="//at.alicdn.com/t/font_1765130_cg2uvt55y8.css"></div></div></main><footer><div class="footer-inner"><p id="hitokoto" style="color:#8a2be2">即将出现一段不可描述的话...</p><script>fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{document.getElementById("hitokoto").innerText=t.hitokoto}).catch(console.error)</script><div><span id="timeDate">正在烧脑计算建站时间...</span> <span id="times"></span><script>var now=new Date;function createtime(){var n=new Date("02/23/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已默默无闻运行&nbsp"+dnum+"&nbsp天",document.getElementById("times").innerHTML=hnum+"&nbsp小时&nbsp"+mnum+"&nbsp分&nbsp"+snum+"&nbsp秒"}setInterval("createtime()",250)</script></div><div class="statistics"><span id="leancloud-site-uv-container" style="display:none">承蒙 <span id="leancloud-site-uv"></span> 位朋友 </span><span id="leancloud-site-pv-container" style="display:none">造访 <span id="leancloud-site-pv"></span> 次</span></div><div class="beian"><span><a href="/icp/blog.pangao.vip.html" target="_blank" rel="nofollow noopener">猿ICP证19901222号</a></span></div><span id="cnzz_stat_icon_1278827075" style="display:none"></span></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://cdn.staticfile.org/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){var t;"tocbot"in window&&(tocbot.refresh(),0!==(t=jQuery("#toc")).length)&&tocbot&&0<t.find(".toc-list-item").length&&t.css("visibility","visible")}))})</script><script src="https://cdn.staticfile.org/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://cdn.staticfile.org/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳哦</div></noscript></body></html>